<!-- Overlay Button Panel -->
<div class="overlay-controls">
    <button 
        (click)="fitToView.emit()" 
        data-tooltip="Fit to Screen (F)"
        title="Fit to Screen">
    <i class="material-icons">fullscreen</i>
    </button>
    <button 
        (click)="toggleCollision.emit()" 
        [class.active]="collisionAvoidance"
        data-tooltip="Collision Avoidance (C)">
    <i class="material-icons">sync_disabled</i>
    </button>
    <button 
        (click)="toggleAggregation.emit()" 
        [class.active]="aggregated"
        data-tooltip="Toggle Aggregation (A)"
        title="Toggle Aggregation">
    <i class="material-icons">bubble_chart</i>
    </button>
    <button 
        (click)="toggleSelection.emit()" 
        [class.active]="selectionMode"
        data-tooltip="Selection Mode (S)"
        title="Selection Mode">        
    <i class="material-icons">select_all</i>
    </button>
    <!-- <button 
        (click)="toggleLens.emit()" 
        [class.active]="magicLenseStatus"
        data-tooltip="Magic Lens (L)"
        title="Magic Lens">
    <i class="material-icons">travel_explore</i>
    </button> -->
    <!-- Settings Button -->
    <button 
        class="settings-button" 
        (click)="toggleSettingsPanel.emit()" 
        [class.active]="showSettings"
        data-tooltip="Data Settings (D)"
        title="Data Settings">
    <i class="material-icons">tune</i>
    </button>

    <!-- Dropdown -->
    <div class="settings-dropdown" *ngIf="showSettings">
        <label>
            <span class="select-label">Timestamp</span>
            <select [(ngModel)]="selectedTimestamp" (ngModelChange)="emitSettingsChange()">
            <option *ngFor="let t of timestamps" [value]="t">{{ t }}</option>
            </select>
        </label>

        <label>
            <span class="select-label">Algorithm</span>
            <select [(ngModel)]="selectedAlgorithm" (ngModelChange)="emitSettingsChange()">
            <option *ngFor="let algo of algorithms" [value]="algo">{{ algo }}</option>
            </select>
        </label>

        <!-- <label>
            <span class="select-label">Context</span>
            <select [(ngModel)]="selectedContext" (ngModelChange)="emitSettingsChange()">
            <option *ngFor="let context of contexts" [value]="context">{{ context }}</option>
            </select>
        </label> -->

        <div class="animation-control-group">
            <div class="select-label">Playback Controls</div>
            <div class="animation-controls">

                <button (click)="decreaseSpeed()" data-tooltip="Decrease Speed">
                    <i class="material-icons">remove</i>
                </button>

                <div class="speed-display">
                    {{ animationSpeed }}
                </div>

                <button (click)="increaseSpeed()" data-tooltip="Increase Speed">
                    <i class="material-icons">add</i>
                </button>

                <button (click)="togglePaused()" [attr.data-tooltip]="paused ? 'Play Animation' : 'Pause Animation'">
                <i class="material-icons">
                    {{ paused ? 'play_arrow' : 'pause' }}
                </i>
                </button>
            </div>
        </div>
    </div>
</div>